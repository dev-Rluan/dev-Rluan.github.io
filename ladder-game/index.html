<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì‚¬ë‹¤ë¦¬ íƒ€ê¸° ê²Œì„ ğŸ¯</title>
  <style>
    /* ğŸ¨ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', 'Apple SD Gothic Neo', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 2rem;
      color: #333;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 1rem;
      padding: 2rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    
    h1 {
      text-align: center;
      color: #4a5568;
      margin-bottom: 2rem;
      font-size: 2.5rem;
    }
    
    /* ì…ë ¥ í¼ ìŠ¤íƒ€ì¼ */
    .input-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: #f7fafc;
      border-radius: 0.5rem;
    }
    
    .input-group {
      display: flex;
      flex-direction: column;
    }
    
    .input-group label {
      font-weight: bold;
      margin-bottom: 0.5rem;
      color: #4a5568;
    }
    
    .input-group textarea {
      height: 120px;
      padding: 0.75rem;
      border: 2px solid #e2e8f0;
      border-radius: 0.5rem;
      resize: vertical;
      font-family: inherit;
    }
    
    .input-group textarea:focus {
      outline: none;
      border-color: #667eea;
    }
    
    /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .button-group {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-bottom: 2rem;
    }
    
    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 0.5rem;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .btn-primary {
      background: #667eea;
      color: white;
    }
    
    .btn-primary:hover {
      background: #5a67d8;
      transform: translateY(-2px);
    }
    
    .btn-secondary {
      background: #e2e8f0;
      color: #4a5568;
    }
    
    .btn-secondary:hover {
      background: #cbd5e0;
    }
    
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    /* ì‚¬ë‹¤ë¦¬ ë³´ë“œ ìŠ¤íƒ€ì¼ */
    .ladder-board {
      position: relative;
      margin: 2rem 0;
      min-height: 400px;
      background: white;
      border-radius: 0.5rem;
      padding: 2rem;
      border: 2px solid #e2e8f0;
    }
    
    .ladder-container {
      position: relative;
      display: flex;
      justify-content: space-around;
      align-items: flex-start;
      min-height: 300px;
    }
    
    .vertical-line {
      position: relative;
      width: 2px;
      background: #4a5568;
      margin: 0 1rem;
    }
    
    .horizontal-line {
      position: absolute;
      height: 2px;
      background: #4a5568;
      transition: background 0.3s;
    }
    
    .horizontal-line.highlight {
      background: #f56565;
      box-shadow: 0 0 10px #f56565;
    }
    
    .player-name, .result-item {
      text-align: center;
      padding: 0.5rem;
      background: #f7fafc;
      border-radius: 0.25rem;
      margin: 0.5rem 0;
      font-weight: bold;
      min-width: 80px;
    }
    
    .player-name {
      color: #2d3748;
    }
    
    .result-item {
      color: #667eea;
    }
    
    /* ê²°ê³¼ ë³´ë“œ ìŠ¤íƒ€ì¼ */
    .result-board {
      margin-top: 2rem;
      padding: 1.5rem;
      background: #f7fafc;
      border-radius: 0.5rem;
      border-left: 4px solid #667eea;
    }
    
    .result-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem;
      margin: 0.5rem 0;
      background: white;
      border-radius: 0.25rem;
      border-left: 3px solid #667eea;
    }
    
    .result-player {
      font-weight: bold;
      color: #2d3748;
    }
    
    .result-value {
      color: #667eea;
      font-weight: bold;
    }
    
    /* ì• ë‹ˆë©”ì´ì…˜ ê´€ë ¨ */
    .moving-dot {
      position: absolute;
      width: 8px;
      height: 8px;
      background: #f56565;
      border-radius: 50%;
      z-index: 10;
      transition: all 0.5s ease;
    }
    
    /* ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      .input-section {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
      
      .button-group {
        flex-direction: column;
      }
      
      .ladder-container {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .vertical-line {
        margin: 0 0.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ì‚¬ë‹¤ë¦¬ íƒ€ê¸° ê²Œì„ ğŸ¯</h1>
    
    <!-- ì…ë ¥ ì„¹ì…˜ -->
    <div class="input-section">
      <div class="input-group">
        <label for="players">ì°¸ê°€ì ì´ë¦„ (í•œ ì¤„ì— í•˜ë‚˜ì”©)</label>
        <textarea id="players" placeholder="ì°¸ê°€ì1&#10;ì°¸ê°€ì2&#10;ì°¸ê°€ì3&#10;ì°¸ê°€ì4"></textarea>
      </div>
      <div class="input-group">
        <label for="results">ê²°ê³¼ í•­ëª© (í•œ ì¤„ì— í•˜ë‚˜ì”©)</label>
        <textarea id="results" placeholder="ìƒí’ˆ1&#10;ìƒí’ˆ2&#10;ìƒí’ˆ3&#10;ìƒí’ˆ4"></textarea>
      </div>
    </div>
    
    <!-- ë²„íŠ¼ ê·¸ë£¹ -->
    <div class="button-group">
      <button class="btn btn-primary" id="generateBtn">ì‚¬ë‹¤ë¦¬ ìƒì„±</button>
      <button class="btn btn-primary" id="startBtn" disabled>ì‹œì‘!</button>
      <button class="btn btn-secondary" id="resetBtn">ë¦¬ì…‹</button>
    </div>
    
    <!-- ì‚¬ë‹¤ë¦¬ ë³´ë“œ -->
    <div class="ladder-board" id="ladderBoard">
      <p style="text-align: center; color: #718096;">ì°¸ê°€ìì™€ ê²°ê³¼ë¥¼ ì…ë ¥í•˜ê³  "ì‚¬ë‹¤ë¦¬ ìƒì„±" ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”!</p>
    </div>
    
    <!-- ê²°ê³¼ ë³´ë“œ -->
    <div class="result-board" id="resultBoard" style="display: none;">
      <h3>ğŸ‰ ê²°ê³¼</h3>
      <div id="resultList"></div>
    </div>
  </div>

  <script>
    // ğŸ¯ ì‚¬ë‹¤ë¦¬ ê²Œì„ í´ë˜ìŠ¤
    class LadderGame {
      constructor() {
        this.players = [];
        this.results = [];
        this.ladder = [];
        this.gameResults = [];
        this.isAnimating = false;
        
        this.init();
      }
      
      init() {
        this.bindEvents();
        this.loadFromStorage();
      }
      
      bindEvents() {
        document.getElementById('generateBtn').addEventListener('click', () => this.generateLadder());
        document.getElementById('startBtn').addEventListener('click', () => this.startGame());
        document.getElementById('resetBtn').addEventListener('click', () => this.resetGame());
      }
      
      // ì…ë ¥ ë°ì´í„° íŒŒì‹±
      parseInput() {
        const playersText = document.getElementById('players').value.trim();
        const resultsText = document.getElementById('results').value.trim();
        
        this.players = playersText.split('\n').filter(name => name.trim());
        this.results = resultsText.split('\n').filter(result => result.trim());
        
        return this.players.length > 0 && this.results.length > 0;
      }
      
      // ì‚¬ë‹¤ë¦¬ ìƒì„±
      generateLadder() {
        if (!this.parseInput()) {
          alert('ì°¸ê°€ìì™€ ê²°ê³¼ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!');
          return;
        }
        
        if (this.players.length !== this.results.length) {
          alert('ì°¸ê°€ì ìˆ˜ì™€ ê²°ê³¼ ìˆ˜ê°€ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤!');
          return;
        }
        
        this.createLadderStructure();
        this.renderLadder();
        this.saveToStorage();
        
        document.getElementById('startBtn').disabled = false;
      }
      
      // ì‚¬ë‹¤ë¦¬ êµ¬ì¡° ìƒì„±
      createLadderStructure() {
        const playerCount = this.players.length;
        this.ladder = [];
        
        // ì„¸ë¡œì¤„ ìƒì„±
        for (let i = 0; i < playerCount; i++) {
          this.ladder[i] = [];
        }
        
        // ê°€ë¡œì¤„ ëœë¤ ìƒì„±
        for (let row = 0; row < 8; row++) {
          for (let col = 0; col < playerCount - 1; col++) {
            if (Math.random() < 0.3) { // 30% í™•ë¥ ë¡œ ê°€ë¡œì¤„ ìƒì„±
              this.ladder[col][row] = col + 1;
              this.ladder[col + 1][row] = col;
            }
          }
        }
      }
      
      // ì‚¬ë‹¤ë¦¬ ë Œë”ë§
      renderLadder() {
        const board = document.getElementById('ladderBoard');
        const playerCount = this.players.length;
        
        board.innerHTML = `
          <div class="ladder-container">
            ${this.players.map((player, index) => `
              <div style="display: flex; flex-direction: column; align-items: center;">
                <div class="player-name">${player}</div>
                <div class="vertical-line" style="height: 300px;" data-player="${index}"></div>
                <div class="result-item">${this.results[index]}</div>
              </div>
            `).join('')}
          </div>
        `;
        
        // ê°€ë¡œì¤„ ì¶”ê°€
        this.addHorizontalLines();
      }
      
      // ê°€ë¡œì¤„ ì¶”ê°€
      addHorizontalLines() {
        const container = document.querySelector('.ladder-container');
        const verticalLines = container.querySelectorAll('.vertical-line');
        
        for (let row = 0; row < 8; row++) {
          for (let col = 0; col < this.ladder.length - 1; col++) {
            if (this.ladder[col][row] !== undefined) {
              const line = document.createElement('div');
              line.className = 'horizontal-line';
              line.style.width = '50px';
              line.style.left = `${col * 100 + 50}px`;
              line.style.top = `${row * 35 + 50}px`;
              line.dataset.row = row;
              line.dataset.col = col;
              
              container.appendChild(line);
            }
          }
        }
      }
      
      // ê²Œì„ ì‹œì‘
      async startGame() {
        if (this.isAnimating) return;
        
        this.isAnimating = true;
        document.getElementById('startBtn').disabled = true;
        
        this.gameResults = [];
        
        // ê° ì°¸ê°€ìë³„ë¡œ ì‚¬ë‹¤ë¦¬ íƒ€ê¸°
        for (let i = 0; i < this.players.length; i++) {
          await this.animatePlayer(i);
        }
        
        this.showResults();
        this.isAnimating = false;
        document.getElementById('startBtn').disabled = false;
      }
      
      // ì°¸ê°€ì ì• ë‹ˆë©”ì´ì…˜
      async animatePlayer(playerIndex) {
        return new Promise(resolve => {
          let currentCol = playerIndex;
          let currentRow = 0;
          
          const dot = document.createElement('div');
          dot.className = 'moving-dot';
          document.querySelector('.ladder-container').appendChild(dot);
          
          const animate = () => {
            if (currentRow >= 8) {
              // ê²°ê³¼ ë„ë‹¬
              this.gameResults.push({
                player: this.players[playerIndex],
                result: this.results[currentCol]
              });
              
              dot.remove();
              resolve();
              return;
            }
            
            // í˜„ì¬ ìœ„ì¹˜ì— ê°€ë¡œì¤„ì´ ìˆëŠ”ì§€ í™•ì¸
            const hasHorizontalLine = this.ladder[currentCol] && this.ladder[currentCol][currentRow] !== undefined;
            
            if (hasHorizontalLine) {
              // ê°€ë¡œì¤„ í•˜ì´ë¼ì´íŠ¸
              const horizontalLine = document.querySelector(`[data-row="${currentRow}"][data-col="${currentCol}"]`);
              if (horizontalLine) {
                horizontalLine.classList.add('highlight');
              }
              
              // ê°€ë¡œ ì´ë™
              const nextCol = this.ladder[currentCol][currentRow];
              dot.style.left = `${nextCol * 100 + 46}px`;
              dot.style.top = `${currentRow * 35 + 46}px`;
              currentCol = nextCol;
            } else {
              // ì„¸ë¡œ ì´ë™
              dot.style.left = `${currentCol * 100 + 46}px`;
              dot.style.top = `${currentRow * 35 + 46}px`;
            }
            
            currentRow++;
            
            setTimeout(animate, 500);
          };
          
          animate();
        });
      }
      
      // ê²°ê³¼ í‘œì‹œ
      showResults() {
        const resultBoard = document.getElementById('resultBoard');
        const resultList = document.getElementById('resultList');
        
        resultList.innerHTML = this.gameResults.map(result => `
          <div class="result-item">
            <span class="result-player">${result.player}</span>
            <span class="result-value">â†’ ${result.result}</span>
          </div>
        `).join('');
        
        resultBoard.style.display = 'block';
        this.saveResultsToStorage();
      }
      
      // ê²Œì„ ë¦¬ì…‹
      resetGame() {
        this.players = [];
        this.results = [];
        this.ladder = [];
        this.gameResults = [];
        this.isAnimating = false;
        
        document.getElementById('players').value = '';
        document.getElementById('results').value = '';
        document.getElementById('ladderBoard').innerHTML = '<p style="text-align: center; color: #718096;">ì°¸ê°€ìì™€ ê²°ê³¼ë¥¼ ì…ë ¥í•˜ê³  "ì‚¬ë‹¤ë¦¬ ìƒì„±" ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”!</p>';
        document.getElementById('resultBoard').style.display = 'none';
        document.getElementById('startBtn').disabled = true;
        
        this.clearStorage();
      }
      
      // localStorage ê´€ë ¨
      saveToStorage() {
        localStorage.setItem('ladderGame', JSON.stringify({
          players: this.players,
          results: this.results,
          ladder: this.ladder
        }));
      }
      
      loadFromStorage() {
        const saved = localStorage.getItem('ladderGame');
        if (saved) {
          const data = JSON.parse(saved);
          this.players = data.players || [];
          this.results = data.results || [];
          this.ladder = data.ladder || [];
          
          if (this.players.length > 0) {
            document.getElementById('players').value = this.players.join('\n');
            document.getElementById('results').value = this.results.join('\n');
            this.renderLadder();
            document.getElementById('startBtn').disabled = false;
          }
        }
      }
      
      saveResultsToStorage() {
        localStorage.setItem('ladderGameResults', JSON.stringify(this.gameResults));
      }
      
      clearStorage() {
        localStorage.removeItem('ladderGame');
        localStorage.removeItem('ladderGameResults');
      }
    }
    
    // ê²Œì„ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', () => {
      new LadderGame();
    });
  </script>
</body>
</html> 